#pragma checksum "D:\SSP_CSKH\Source\CSKH_SSP\CSKH_SSP\Views\UserPermission\Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "56982d58c5ad0066b9b300f58e53e08e6d1237f0"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_UserPermission_Index), @"mvc.1.0.view", @"/Views/UserPermission/Index.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"56982d58c5ad0066b9b300f58e53e08e6d1237f0", @"/Views/UserPermission/Index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"57218c316b6921e2cd61027a2387edc31a2d9471", @"/Views/_ViewImports.cshtml")]
    public class Views_UserPermission_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<List<CSKH_SSP.ViewModels.AddNewRequest.UserInDepartment>>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 3 "D:\SSP_CSKH\Source\CSKH_SSP\CSKH_SSP\Views\UserPermission\Index.cshtml"
  
    Layout = null;

#line default
#line hidden
#nullable disable
            WriteLiteral(@"


<div class=""row"">
    <div class=""col-lg-12"">
        <div class=""card m-b-30"">
            <div class=""card-header"">
                <h5 class=""card-title"">Danh sách Admin</h5>
            </div>
            <div class=""card-body"">
                <h6 class=""card-subtitle"">Có thể thêm nhiều tên cùng lúc .Click vào tên User xóa khỏi danh sách</h6>
                <div class=""row"">
                    <div class=""col-10"">
                        <div class=""form-group"">
                            <div class=""form-group"">
                                <select class=""select2-multi-select form-control select2-hidden-accessible""");
            BeginWriteAttribute("multiple", " multiple=\"", 836, "\"", 847, 0);
            EndWriteAttribute();
            WriteLiteral(@" data-select2-id=""3"" tabindex=""-1"" aria-hidden=""true"" id=""chooseUserAddAdmin"">
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class=""col-2"">
                        <button type=""button"" onclick=""SetPermission(1)"" class=""btn btn-primary"">Thêm</button>
                    </div>
                </div>

                <div class=""button-list"" id=""listAdmin"">
                </div>
            </div>
        </div>
    </div>
    <div class=""col-lg-12"">
        <div class=""card m-b-30"">
            <div class=""card-header"">
                <h5 class=""card-title"">Danh sách Người xử lý yêu cầu</h5>
            </div>
            <div class=""card-body"">
                <h6 class=""card-subtitle"">Có thể thêm nhiều tên cùng lúc .Click vào tên User xóa khỏi danh sách</h6>
                <div class=""row"">
                    <div class=""col-10"">
                        <div class=""fo");
            WriteLiteral("rm-group\">\r\n                            <div class=\"form-group\">\r\n                                <select class=\"select2-multi-select form-control select2-hidden-accessible\"");
            BeginWriteAttribute("multiple", " multiple=\"", 2045, "\"", 2056, 0);
            EndWriteAttribute();
            WriteLiteral(@" data-select2-id=""2"" tabindex=""-1"" aria-hidden=""true"" id=""chooseUserAddStaff"">
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class=""col-2"">
                        <button type=""button"" onclick=""SetPermission(2)"" class=""btn btn-primary"">Thêm</button>
                    </div>
                </div>

                <div class=""button-list"" id=""listStaff"">
                </div>
            </div>
        </div>
    </div>
    <div class=""col-lg-12"">
        <div class=""card m-b-30"">
            <div class=""card-header"">
                <h5 class=""card-title"">Danh sách Trưởng nhóm / bộ phận</h5>
            </div>
            <div class=""card-body"">
                <h6 class=""card-subtitle"">Có thể thêm nhiều tên cùng lúc .Click vào tên User xóa khỏi danh sách</h6>
                <div class=""row"">
                    <div class=""col-10"">
                        <div class=""");
            WriteLiteral("form-group\">\r\n                            <div class=\"form-group\">\r\n                                <select class=\"select2-multi-select form-control select2-hidden-accessible\"");
            BeginWriteAttribute("multiple", " multiple=\"", 3256, "\"", 3267, 0);
            EndWriteAttribute();
            WriteLiteral(@" data-select2-id=""2"" tabindex=""-1"" aria-hidden=""true"" id=""chooseUserAddStaff"">
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class=""col-2"">
                        <button type=""button"" onclick=""SetPermission(4)"" class=""btn btn-primary"">Thêm</button>
                    </div>
                </div>

                <div class=""button-list"" id=""listStaff"">
                </div>
            </div>
        </div>
    </div>
</div>


");
            WriteLiteral(@"
<script>
    //chooseUserAddStaff
    $(document).ready(function () {
        $('#chooseUserAddAdmin').select2({
            placeholder: 'Gõ họ tên hoặc user name người cần tìm',
        });
        $('#chooseUserAddStaff').select2({
            placeholder: 'Gõ họ tên hoặc user name người cần tìm',
        });
    });

        function fetchListUserCanChoose() {
            $('#chooseUserAddAdmin').empty();
            $('#chooseUserAddStaff').empty();
            $.getJSON(""api/Helpers/GetUserCanConfigPermission"", function (data) {
                var toAppend = '';
                $.each(data, function (i, o) {
                    toAppend += '<option value=""' + o.userName + '"">' + o.userName + ' - ' + o.fullName + '</option>';
                });
                $('#chooseUserAddAdmin').append(toAppend);
                $('#chooseUserAddStaff').append(toAppend);
                $(""#chooseUserAddAdmin"").trigger(""change"");
                $(""#chooseUserAddStaff"").trigger(""change"");");
            WriteLiteral(@"
                //console.log(data);
            });
         }

        function SetPermission(groupID) {
            var arr = [];
            if (groupID == 1) {
                arr = $(""#chooseUserAddAdmin"").val();
            } else if (groupID == 2) {
                arr = $(""#chooseUserAddStaff"").val();
            }
            $.post(""");
#nullable restore
#line 141 "D:\SSP_CSKH\Source\CSKH_SSP\CSKH_SSP\Views\UserPermission\Index.cshtml"
               Write(Url.Action("SetPermission", "AdminAction"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@""",
                    {
                        Username: arr,
                        GroupUserID: groupID
                    },
                    function (data, status) {
                        if (data == ""1"") {
                            fetchPermissionList();
                        } else {
                            alert(""Lỗi"");
                            $("".close"").click();
                        }
                    });
    };

        function delUserPermission(userName) {
            $.post(""");
#nullable restore
#line 157 "D:\SSP_CSKH\Source\CSKH_SSP\CSKH_SSP\Views\UserPermission\Index.cshtml"
               Write(Url.Action("DeletePermission", "AdminAction"));

#line default
#line hidden
#nullable disable
            WriteLiteral(@""",
                    {
                        Username: userName
                    },
                    function (data, status) {
                        if (data == ""1"") {
                            fetchPermissionList();
                        } else {
                            alert(""Lỗi"");
                            $("".close"").click();
                        }
                    });
    };
        //chooseUserAddAdmin
        function fetchListAdmin() {
            $('#listAdmin').empty();
            $.getJSON(""api/Helpers/GetAllAdmin"", function (data) {
                var toAppend = '';
                $.each(data, function (i, o) {
                    toAppend += '<div class=""btn btn-outline-primary categoryClass"" onclick=""delUserPermission(\''  + o.userName +'\')"" value=""' + o.userName + '"">' + o.userName + ' - ' + o.fullName + '</div>';
                });
                $('#listAdmin').append(toAppend);
                //console.log(data);
            });
   ");
            WriteLiteral(@" };
    function fetchListStaff() {
        $('#listStaff').empty();
        $.getJSON(""api/Helpers/GetAllUserCanAssignRequest"", function (data) {
            var toAppend = '';
            $.each(data, function (i, o) {
                toAppend += '<div class=""btn btn-outline-primary categoryClass"" onclick=""delUserPermission(\'' + o.userName + '\')"" value=""' + o.userName + '"">' + o.userName + ' - ' + o.fullName + '</div>';
            });
            $('#listStaff').append(toAppend);
            //console.log(data);
        });
    };

    function fetchPermissionList() {
        fetchListAdmin();
        fetchListUserCanChoose();
        fetchListStaff();
    };
    fetchPermissionList();



</script>
");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<List<CSKH_SSP.ViewModels.AddNewRequest.UserInDepartment>> Html { get; private set; }
    }
}
#pragma warning restore 1591
